# 02B - API Development

In this step you will be developing the API you wrote an OpenAPI specification for in the previous step.

## Parts

- `flask` is a Python web framework [[docs](https://flask.palletsprojects.com/)]
- `connexion` is a wrapper for `flask` for applying OpenAPI specifications on your API [[docs](https://github.com/zalando/connexion)]
- `boto3`

## Challenge

Implement your API from the previous step using the starter code and your OpenAPI Specification. 

You will want to use `boto3` to generate the presigned URL [[docs](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-presigned-urls.html)]. Read more about what a presigned URL is [here](https://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html)

```python
# example
url = s3.generate_presigned_url(
    'put_object',
    Params={
        'Bucket': 'testbucket',
        'Key': 'outfile.png',
        'ContentType': 'image/png'
    },
    HttpMethod="PUT",
)
```

When creating a presigned URL, the API will take an object name (S3 object key) for the the URL that will be used to upload. Instead of using the filename, autogenerate one using `uuid.uuid4()` for now [[docs](https://docs.python.org/3/library/uuid.html#uuid.uuid4)]. Make sure to keep a record of the random image file keys in your database.

## About the Starter Code

If you run the API via `python app.py` you will be able to hit the documentation page for your API at `localhost:5000/ui/` that is autogenerated from your OpenAPI specification.

You will see that `localhost:5000/users/me` will be handled by `get_profile()` in file `app.py`. The `connexion` module uses your endpoint spec's `operationId` to automatically associate your request handler function with the endpoint.
